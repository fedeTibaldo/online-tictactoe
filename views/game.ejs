<% include header %>

<!-- interface here -->

<% include socketio %>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        // instantiate soket
        let socket = io();
        // bind listeners
        socket.on('test', () => {
            document.body.style.backgroundColor = 'red'
        })
        socket.on('match', (matchId) => {
            localStorage.setItem('matchId', matchId)
        })
        // init
        let matchId
        if (matchId = localStorage.getItem("matchId"))
            socket.emit('start', matchId)
        else
            socket.emit('queue')
    })
</script>

<% include footer %>